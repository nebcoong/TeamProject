<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAHO</title>
    <link rel="stylesheet" href="CSS/test.css">
</head>

<body>
	
    <div class="nav">
        <img src="/IMG/logo_test1.png" alt="" onclick="location.href='/Schedule/animeSchedule'">
        <div class="navitem" onclick="location.href='/Main'">홈</div>
        <div class="navitem" onclick="location.href='/List/List_list'">전체 애니</div>
        <div class="navitem" onclick="location.href='/Schedule/animeSchedule'">방영중 애니</div>
        <div class="navitem">자유게시판</div>
        <div class="navitem" onclick="location.href='/Admin/insert'">관리자</div>
    </div>
    
    <br><br>
    
    <div class="title" style="background-color: black;">
        <img src="" alt="">
	</div>
	
	<hr class="custom-hr"><br>

	<!-- carousel 시작 -->
	<div class="carousel_main">
		<div class="carousel_wrapper">
			<div class="carousel_slide">
				<img src="IMG/TEST/test01.webp" />
			</div>
			<div class="carousel_slide">
				<img src="IMG/TEST/test02.webp" />
			</div>
			<div class="carousel_slide">
				<img src="IMG/TEST/test03.webp" />
			</div>
			<div class="carousel_slide">
				<img src="IMG/TEST/test04.webp" />
			</div>
			<div class="carousel_slide">
				<img src="IMG/TEST/test05.webp" />
			</div>
			<div class="carousel_slide">
				<img src="IMG/TEST/test06.webp" />
			</div>
			<div class="carousel_slide">
				<img src="IMG/TEST/test07.webp" />
			</div>
			<div class="carousel_slide">
				<img src="IMG/TEST/test08.webp" />
			</div>
		</div>
		
		<div class="carousel_button_container">
			<button type="button" class="carousel_prev">
				<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"
					fill="currentColor" class="bi bi-chevron-double-left"
					viewBox="0 0 16 16">
                <path fill-rule="evenodd"
						d="M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                <path fill-rule="evenodd"
						d="M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
            </svg>
			</button>
			<button type="button" class="carousel_next">
				<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"
					fill="currentColor" class="bi bi-chevron-double-right"
					viewBox="0 0 16 16">
                <path fill-rule="evenodd"
						d="M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z" />
                <path fill-rule="evenodd"
						d="M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
			</button>
		</div>
		<div class="carousel_pagination">
			<div class="carousel_circle"></div>
			<div class="carousel_circle"></div>
			<div class="carousel_circle"></div>
			<div class="carousel_circle"></div>
			<div class="carousel_circle"></div>
			<div class="carousel_circle"></div>
			<div class="carousel_circle"></div>
			<div class="carousel_circle"></div>
		</div>
	</div>
	<!-- carousel 끝 -->

	<hr class="custom-hr"><br>
	
	<h2 style="color:#ffffff;"> &nbsp; - 테스트용 애니 목록</h2>
	<div class="swiper-container">
		<div class="swiper-wrapper">
			<div class="swiper-slide">
				<img src="IMG/TEST/test01.webp" alt="이미지1">
				<div class="slide-title">닌자 카무이</div>
			</div>
			<div class="swiper-slide">
				<img src="IMG/TEST/test02.webp" alt="이미지2">
				<div class="slide-title">서머 포켓츠</div>
			</div>
			<div class="swiper-slide">
				<img src="IMG/TEST/test03.webp" alt="이미지1">
				<div class="slide-title">전수.</div>
			</div>
			<div class="swiper-slide">
				<img src="IMG/TEST/test04.webp" alt="이미지2">
				<div class="slide-title">완벽해서 귀여운 구석이 없다고 파혼당한 성녀는 이웃 나라에 팔린다</div>
			</div>
			<div class="swiper-slide">
				<img src="IMG/TEST/test05.webp" alt="이미지1">
				<div class="slide-title">록은 숙녀의 소양이기에</div>
			</div>
			<div class="swiper-slide">
				<img src="IMG/TEST/test06.webp" alt="이미지2">
				<div class="slide-title">바이바이, 어스</div>
			</div>
			<div class="swiper-slide">
				<img src="IMG/TEST/test07.webp" alt="이미지1">
				<div class="slide-title">위치 워치</div>
			</div>
			<div class="swiper-slide">
				<img src="IMG/TEST/test08.webp" alt="이미지2">
				<div class="slide-title">하늘색 유틸리티</div>
			</div>
		</div>
		<!-- 좌우 화살표 -->
		<div class="swiper-button-prev"></div>
		<div class="swiper-button-next"></div>
	</div>
	
	<h2 style="color:#ffffff;"> &nbsp; - 오늘의 애니</h2>
	<div class="swiper-container">
		<div class="swiper-wrapper" th:each="anime : ${animeList}">
			<div class="swiper-slide">
				<!-- camelCase로 THUMBNAIL_GARO_URL을 아래와 같이 설정해놨음 -->
				<img th:src="${anime.thumnailGaroUrl}" alt="이미지1">
				<div class="slide-title" th:text = "${anime.title}"></div>
			</div>
		</div>
		<!-- 좌우 화살표 -->
		<div class="swiper-button-prev"></div>
		<div class="swiper-button-next"></div>
	</div>

	<!-- 모달 -->
	<div id="animeModal" class="modal">
		<div class="modal_content">
			<span class="close" onclick="modal_close()">&times;</span>
			<div class="modal_div">
			
				<div class="modal_img">
					<img id="modal_img" src="" alt="이미지">
				</div>
				
				<div class="modal_title" id="modal_title"></div>
				
				<div class="modal_desc">
					<div class="desc_inf" id="modal_desc"></div>
				</div>
			</div>
		</div>
	</div>

	<hr class="custom-hr"><br>
	
	<!-- 유튜브 -->
	<h2 style="color:#ffffff;"> &nbsp; - YouTube</h2>
	<div class="swiper-container-youtube">
		<div class="swiper-wrapper">
			<div class="swiper-slide">
				<iframe width="400" height="315"
					src="https://www.youtube.com/embed/9FCX_7tCcrk?si=1ulvnLTJXmSAwlgW"
					title="YouTube video player" frameborder="0"
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
					referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
			</div>
			
			<div class="swiper-slide">
				<iframe width="400" height="315"
					src="https://www.youtube.com/embed/GjfSwJlq4rk?si=f9fk3v_gPepNK2ca"
					title="YouTube video player" frameborder="0"
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
					referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
			</div>
			
			<div class="swiper-slide">
				<iframe width="400" height="315"
					src="https://www.youtube.com/embed/BGlQakaaJDs?si=F9D4zQm0PJ-uHCa1"
					title="YouTube video player" frameborder="0"
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
					referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
			</div>
			
			<div class="swiper-slide">
				<iframe width="400" height="315"
					src="https://www.youtube.com/embed/w1J9aH9DhrY?si=cP41P8iSmbmiioR-"
					title="YouTube video player" frameborder="0"
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
					referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
			</div>
			
			<div class="swiper-slide">
				<iframe width="400" height="315"
					src="https://www.youtube.com/embed/ptc0YXw9ZOo?si=DhFn1kfVL9nlSlRr" 
					title="YouTube video player" frameborder="0" 
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
					referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
			</div>
			
			<div class="swiper-slide">
				<iframe width="400" height="315"
					src="https://www.youtube.com/embed/VYFsjzOmJhk?si=5pkyNXQ0yBM61KjG" 
					title="YouTube video player" frameborder="0" 
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
					referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
			</div>
		</div>
		
		<!-- 좌우 화살표 -->
		<div class="swiper-button-prev"></div>
		<div class="swiper-button-next"></div>
	</div>
	
	<hr class="custom-hr"><br>

	<div class="core">
		<div class="core_title">추천 애니</div>
		<div class="core_cont">
			<img src="/static/img/java.png" alt=""> 
			<img src="static/img/python.png" alt=""> 
			<img src="static/img/c.png" alt=""> 
			<img src="static/img/html.png" alt=""> 
			<img src="static/img/css.png" alt=""> 
			<img src="static/img/js.png" alt="">
		</div>
		
		<div class="core_title">뭘넣을까</div>
		<div class="core_cont" style="margin-bottom: 0; padding-bottom: 80px;">
			<img id="umc" src="static/img/umc.png" alt="">
			<div id="umc_activity" class="activity">
				<li>UMC 3rd Spring 부원</li>
				<li>UMC 아이디어톤 5개 중 3개 수상</li>
				<li>UMC 4th 운영진 Server 파트장</li>
			</div>
			
			<img id="demoday" src="static/img/demoday.png" alt="">
			<div id="demoday_activity" class="activity">
				<li>UMC DemoDay 최우수상</li>
			</div>
		</div>
	</div>

	<!-- Swiper JS -->
	<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>  
</body>
<script>
	// 캐러셀 내 모든 슬라이드에 클릭 이벤트 추가
	document.querySelectorAll(".swiper-slide").forEach(slide => {
    	slide.addEventListener("click", function () {
        	let title = this.querySelector(".slide-title").innerText; // 제목 가져오기
        	let imgSrc = this.querySelector("img").src;               // 이미지 URL 가져오기
        	let desc = "이것은 스크롤 테스트를 위한 텍스트입니다.\n\n\n\n\n\n\n\n\n\n";
        	desc += "여기에 더 많은 줄바꿈을 추가합니다.\n\n\n\n\n\n\n\n\n\n";
        	desc += "이제 모달 창에서 스크롤이 잘 되는지 확인해 보세요!";

        	openm(title, imgSrc, desc);
    	});
	});
    
    document.addEventListener("DOMContentLoaded", function () {
        var swiper = new Swiper(".swiper-container", {
            slidesPerView: 4, // 한 번에 보이는 슬라이드 개수
            spaceBetween: 20, // 이미지 간격
            loop: false, // 무한 루프 여부
            grabCursor: true, // 마우스 커서를 손모양으로 변경
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            breakpoints: {
                1024: { slidesPerView: 4 },
                768: { slidesPerView: 3 },
                480: { slidesPerView: 2 },
            },
        });

    	// 이미지 클릭 시 특정 페이지로 이동
    	document.querySelectorAll(".swiper-slide").forEach((slide, index) => {
			slide.addEventListener("click", () => {
				//window.location.href = `https:example.com/page${index + 1}`;
			});
		});
    });
    
    document.addEventListener("DOMContentLoaded", function () {
        const maxLength = 15; // 최대 글자 수 (원하는 값으로 변경)

        document.querySelectorAll(".slide-title").forEach(titleElement => {
            let fullTitle = titleElement.textContent.trim(); // 원래 제목 가져오기
            
            if (fullTitle.length > maxLength) {
                titleElement.setAttribute("data-title", fullTitle); // data-title에 원제목 저장
                titleElement.textContent = fullTitle.substring(0, maxLength) + "..."; // 축약 후 표시
            }
        });
    });
    
  	//모달 열기 함수 (모든 슬라이드에서 하나의 모달을 공유)
	function openm(title, imgSrc, desc) {
    	document.getElementById("modal_title").innerText = title;  // 제목 설정
    	document.getElementById("modal_img").src = imgSrc;         // 이미지 설정
    	document.getElementById("modal_desc").innerText = desc;    // 설명 설정
    	document.getElementById("animeModal").style.display = "block";  // 모달 표시
    	
    	// 모달 내부 스크롤 초기화
        document.querySelector(".modal_content").scrollTop = 0;
	}
  
 	// 모달 닫기 함수
    function modal_close() {
        document.getElementById("animeModal").style.display = "none";
    }

    // 모달 바깥 영역 클릭 시 닫기 기능 추가
    window.onclick = function(event) {
        let modal = document.getElementById("animeModal");
        if (event.target === modal) {  // 모달 바깥 클릭 시
            modal_close();  // 모달 닫기 실행
        }
    };

    // nav 스크롤 시 반투명화
    window.addEventListener("scroll", function () {
        let nav = document.querySelector(".nav");
        let scrollY = window.scrollY;

        // 투명도 범위 계산 (0.9 ~ 0.3 사이)
        let baseOpacity = Math.max(0.9, 0.9 - scrollY / 300);

        // 위쪽은 진하고, 아래쪽은 투명해지는 그라데이션 생성
        nav.style.background = `linear-gradient(to bottom, rgba(20, 20, 20, ${baseOpacity}) 0%, rgba(20, 20, 20, 0) 100%)`;
    });


    // 유튜브 캐러셀 자동 이동
    const swiper = new Swiper('.swiper-container-youtube', {
        loop: true, // 무한 반복
        autoplay: {
            delay: 3000, // 3초마다 자동 이동
            disableOnInteraction: false, // 사용자가 터치해도 자동 재생 유지
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        slidesPerView: 4, // 한 번에 4개의 슬라이드 보이게
        spaceBetween: 10, // 슬라이드 간 간격
        speed: 1000, // 애니메이션 속도 (1초)
        loopedSlides: 4, // 루프 시 자연스럽게 연결되도록 설정
        autoplay: {
            delay: 3000, // 3초마다 자동 슬라이드
            disableOnInteraction: false, // 사용자가 터치해도 자동 재생 유지
        },
        slidesPerGroup: 1, // 한 번에 하나의 슬라이드만 이동
    });
</script>

<!-- 캐러셀 -->
<script>
const CSswiper = document.querySelector('.carousel_wrapper');
const prevButtons = document.querySelectorAll('.carousel_prev');
const nextButtons = document.querySelectorAll('.carousel_next');
const bullets = document.querySelectorAll('.carousel_circle');
const totalSlides = 7;
let currentSlide = 0;

function showSlide(slideIndex) {
	CSswiper.style.transform = `translateX(-${slideIndex * 1300}px)`;
    currentSlide = slideIndex;

    bullets.forEach((bullet, index) => {
        if (index === currentSlide) {
            bullet.classList.add('active');
        } else {
            bullet.classList.remove('active');
        }
    });
}

prevButtons.forEach((prevButton) => {
    prevButton.addEventListener('click', () => {
    	if (currentSlide === 0) {
            showSlide(totalSlides); // 첫 번째 슬라이드에서 왼쪽 누르면 마지막으로 이동
        } else {
            showSlide(currentSlide - 1);
        }
    });
});

nextButtons.forEach((nextButton) => {
    nextButton.addEventListener('click', () => {
    	if (currentSlide === totalSlides) {
            showSlide(0); // 마지막 슬라이드에서 오른쪽 누르면 처음으로 이동
        } else {
            showSlide(currentSlide + 1);
        }
    });
});

bullets.forEach((bullet, index) => {
    bullet.addEventListener('click', () => {
        showSlide(index);
    });
});

showSlide(0);
</script>
</html>